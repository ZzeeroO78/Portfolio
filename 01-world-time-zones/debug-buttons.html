<!DOCTYPE html>
<html>
<head>
    <title>Debug Buttons</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .debug-box { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #667eea; }
        .error { border-left-color: #f44336; }
        .success { border-left-color: #4caf50; }
        code { background: #eee; padding: 5px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üîç Debug - Button Event Listeners</h1>
    
    <div id="debug"></div>
    
    <h2>Live Preview:</h2>
    <iframe src="index.html" width="100%" height="800" style="border: 2px solid #ddd;"></iframe>
    
    <script>
        const debugDiv = document.getElementById('debug');
        
        function log(title, passed, msg) {
            const box = document.createElement('div');
            box.className = `debug-box ${passed ? 'success' : 'error'}`;
            box.innerHTML = `<strong>${passed ? '‚úÖ' : '‚ùå'} ${title}</strong><p>${msg}</p>`;
            debugDiv.appendChild(box);
        }
        
        // Test setTimeout delay
        setTimeout(() => {
            // Check if main script loaded
            if (typeof window.cities === 'undefined') {
                log('Script Load', false, 'cities array not accessible from iframe');
            } else {
                log('Script Load', true, `Script loaded, ${window.cities.length} cities available`);
            }
            
            // Check if functions exist
            if (typeof window.addCity === 'function') {
                log('addCity Function', true, 'addCity() function exists and is callable');
            } else {
                log('addCity Function', false, 'addCity() function NOT found');
            }
            
            if (typeof window.renderCities === 'function') {
                log('renderCities Function', true, 'renderCities() function exists');
            } else {
                log('renderCities Function', false, 'renderCities() function NOT found');
            }
            
            // Check modal existence
            const modals = {
                cityModal: document.getElementById('cityModal'),
                settingsModal: document.getElementById('settingsModal')
            };
            
            log('Modals', modals.cityModal && modals.settingsModal, 
                `cityModal: ${modals.cityModal ? '‚úì' : '‚úó'}, settingsModal: ${modals.settingsModal ? '‚úì' : '‚úó'}`);
            
            // Check buttons
            const buttons = {
                addCityBtn: document.getElementById('addCityBtn'),
                settingsBtn: document.getElementById('settingsBtn'),
                confirmBtn: document.getElementById('confirmBtn'),
                resetBtn: document.getElementById('resetBtn')
            };
            
            let allExists = true;
            for (let [name, btn] of Object.entries(buttons)) {
                if (!btn) allExists = false;
            }
            
            log('Buttons', allExists, 
                `addCityBtn: ${buttons.addCityBtn ? '‚úì' : '‚úó'}, ` +
                `settingsBtn: ${buttons.settingsBtn ? '‚úì' : '‚úó'}, ` +
                `confirmBtn: ${buttons.confirmBtn ? '‚úì' : '‚úó'}, ` +
                `resetBtn: ${buttons.resetBtn ? '‚úì' : '‚úó'}`);
            
        }, 2000);
    </script>
</body>
</html>
