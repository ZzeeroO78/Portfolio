<!DOCTYPE html>
<html>
<head>
    <title>ğŸŒ Debug Temperatura</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; padding: 20px; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { margin-bottom: 30px; text-align: center; font-size: 28px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .panel { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px; backdrop-filter: blur(10px); }
        .panel h2 { font-size: 18px; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .city-result { margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        .city-name { font-weight: bold; }
        .temp { font-size: 20px; font-weight: bold; color: #fff; }
        .loading { color: #ffeb3b; }
        .success { color: #4caf50; }
        .error { color: #ff6b6b; }
        button { background: #667eea; border: none; color: white; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #5568d3; }
        #console { background: rgba(0,0,0,0.5); border: 1px solid #667eea; border-radius: 5px; padding: 15px; max-height: 300px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 12px; }
        .console-line { margin: 2px 0; }
        .info { color: #4caf50; }
        .warn { color: #ffeb3b; }
        .error-log { color: #ff6b6b; }
        .app-preview { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px; margin-top: 20px; }
        .status-badge { display: inline-block; padding: 5px 10px; border-radius: 3px; font-size: 12px; }
        .badge-ok { background: #4caf50; }
        .badge-warn { background: #ffeb3b; color: #000; }
        .badge-err { background: #ff6b6b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Debug Temperatura</h1>
        
        <div class="grid">
            <!-- Lijevo: API direktno -->
            <div class="panel">
                <h2>ğŸ“¡ Direktni API Test</h2>
                <div id="apiResults"></div>
            </div>
            
            <!-- Desno: Konzola -->
            <div class="panel">
                <h2>ğŸ–¥ï¸ Konzola Ispisa</h2>
                <div id="console"></div>
            </div>
        </div>
        
        <!-- UÄitavanje aplikacije -->
        <div class="panel">
            <h2>ğŸ¯ OptereÄ‡enje Aplikacije</h2>
            <button onclick="loadApp()">UÄitaj Aplikaciju</button>
            <button onclick="clearAll()">ObriÅ¡i sve</button>
            <div style="margin-top: 15px;">
                <span id="appStatus" class="status-badge badge-warn">ÄŒeka uÄitavanje</span>
            </div>
            <div id="appOutput" style="margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 5px; display: none;"></div>
        </div>
        
        <!-- Konzola ispisa -->
        <div class="panel app-preview">
            <h2>ğŸ“º KonaÄni Izlaz</h2>
            <button onclick="testTemps()">Test Temperatura</button>
            <div id="finalOutput" style="margin-top: 15px;"></div>
        </div>
    </div>
    
    <script>
        const consoleDiv = document.getElementById('console');
        const apiResults = document.getElementById('apiResults');
        const appStatus = document.getElementById('appStatus');
        const appOutput = document.getElementById('appOutput');
        const finalOutput = document.getElementById('finalOutput');
        
        // Presretni console
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addConsole(msg, type = 'info') {
            const line = document.createElement('div');
            line.className = `console-line ${type}`;
            line.textContent = msg;
            consoleDiv.appendChild(line);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            originalLog(`[${type}] ${msg}`);
        }
        
        console.log = (...args) => addConsole(args.join(' '), 'info');
        console.error = (...args) => addConsole(args.join(' '), 'error-log');
        console.warn = (...args) => addConsole(args.join(' '), 'warn');
        
        // Direktni API test
        async function testTemps() {
            const cities = [
                { name: 'London', lat: 51.5074, lon: -0.1278 },
                { name: 'New York', lat: 40.7128, lon: -74.0060 },
                { name: 'Tokyo', lat: 35.6762, lon: 139.6503 },
                { name: 'Paris', lat: 48.8566, lon: 2.3522 },
                { name: 'Sydney', lat: -33.8688, lon: 151.2093 },
                { name: 'Dubai', lat: 25.2048, lon: 55.2708 }
            ];
            
            apiResults.innerHTML = '';
            
            for (const city of cities) {
                const div = document.createElement('div');
                div.className = 'city-result';
                div.innerHTML = `<span class="city-name">${city.name}</span><span class="loading">â³</span>`;
                apiResults.appendChild(div);
            }
            
            for (let i = 0; i < cities.length; i++) {
                const city = cities[i];
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=temperature_2m,relative_humidity_2m&timezone=auto`;
                
                try {
                    const resp = await fetch(url);
                    const data = await resp.json();
                    
                    if (data.current) {
                        const temp = Math.round(data.current.temperature_2m);
                        const humidity = data.current.relative_humidity_2m;
                        
                        const results = document.querySelectorAll('.city-result');
                        results[i].innerHTML = `<span class="city-name">${city.name}</span><span class="success temp">${temp}Â°C (${humidity}%)</span>`;
                    }
                } catch (e) {
                    const results = document.querySelectorAll('.city-result');
                    results[i].innerHTML = `<span class="city-name">${city.name}</span><span class="error">âŒ ${e.message}</span>`;
                }
            }
        }
        
        function loadApp() {
            appOutput.style.display = 'block';
            appStatus.textContent = 'UÄitavanje...';
            appStatus.className = 'status-badge badge-warn';
            appOutput.innerHTML = '<p>UÄitavanje aplikacije...</p>';
            
            // UÄitaj index.html sadrÅ¾aj kao iframe
            const iframe = document.createElement('iframe');
            iframe.src = 'http://localhost:8002/index.html';
            iframe.style.width = '100%';
            iframe.style.height = '400px';
            iframe.style.border = '1px solid #667eea';
            iframe.style.borderRadius = '5px';
            
            appOutput.innerHTML = '';
            appOutput.appendChild(iframe);
            
            appStatus.textContent = 'Aplikacija uÄitana';
            appStatus.className = 'status-badge badge-ok';
        }
        
        function clearAll() {
            consoleDiv.innerHTML = '';
            apiResults.innerHTML = '';
            appOutput.innerHTML = '';
            appOutput.style.display = 'none';
            finalOutput.innerHTML = '';
            appStatus.textContent = 'Resetirano';
            appStatus.className = 'status-badge badge-warn';
        }
        
        // Auto-test pri uÄitavanju
        window.addEventListener('load', () => {
            addConsole('ğŸš€ Debug stranica uÄitana', 'info');
            testTemps();
        });
    </script>
</body>
</html>
