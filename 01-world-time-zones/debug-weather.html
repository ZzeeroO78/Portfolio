<!DOCTYPE html>
<html>
<head>
    <title>Weather Debug</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .result { margin: 10px 0; padding: 10px; background: #f0f0f0; border-left: 3px solid #333; }
        .error { background: #ffcccc; border-left-color: red; }
        .success { background: #ccffcc; border-left-color: green; }
    </style>
</head>
<body>
    <h1>Weather API Debug Test</h1>
    <div id="results"></div>
    
    <script>
        const cityCoordinates = {
            'london': { lat: 51.5074, lon: -0.1278 },
            'new york': { lat: 40.7128, lon: -74.0060 },
            'tokyo': { lat: 35.6762, lon: 139.6503 },
            'paris': { lat: 48.8566, lon: 2.3522 },
            'sydney': { lat: -33.8688, lon: 151.2093 },
            'dubai': { lat: 25.2048, lon: 55.2708 }
        };

        async function testCity(cityName) {
            const coords = cityCoordinates[cityName.toLowerCase()];
            const resultsDiv = document.getElementById('results');
            
            if (!coords) {
                resultsDiv.innerHTML += `<div class="result error">${cityName}: NO COORDINATES FOUND</div>`;
                return;
            }

            const baseUrl = 'https://api.open-meteo.com/v1/forecast?';
            const params = 'latitude=' + coords.lat + '&longitude=' + coords.lon + '&current=temperature_2m,relative_humidity_2m,weather_code,is_day&timezone=auto';
            const apiUrl = baseUrl + params;

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data && data.current) {
                    const temp = Math.round(data.current.temperature_2m);
                    const humidity = Math.round(data.current.relative_humidity_2m);
                    resultsDiv.innerHTML += `<div class="result success">${cityName}: ${temp}Â°C, Humidity: ${humidity}%</div>`;
                } else {
                    resultsDiv.innerHTML += `<div class="result error">${cityName}: No weather data in response</div>`;
                }
            } catch (error) {
                resultsDiv.innerHTML += `<div class="result error">${cityName}: ${error.message}</div>`;
            }
        }

        async function testAll() {
            const cities = ['london', 'new york', 'tokyo', 'paris', 'sydney', 'dubai'];
            for (const city of cities) {
                await testCity(city);
                await new Promise(r => setTimeout(r, 500)); // Delay between requests
            }
        }

        testAll();
    </script>
</body>
</html>
