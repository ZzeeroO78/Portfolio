<!DOCTYPE html>
<html>
<head>
    <title>Direct Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #0f0; }
        .log { padding: 5px; margin: 2px 0; background: #2a2a2a; }
        .error { color: #ff5555; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Direct Test</h1>
    <div id="output"></div>

    <script>
        const out = document.getElementById('output');
        function log(msg, type = 'info') {
            const div = document.createElement('div');
            div.className = 'log ' + type;
            div.textContent = msg;
            out.appendChild(div);
            console.log(msg);
        }

        log('Starting direct test...');
        
        // Test 1: Load script and check if globals are defined
        log('Test 1: Loading script.js...');
    </script>
    
    <script src="script.js?v=6.0"></script>
    
    <script>
        function test() {
            log('Test 2: Checking globals after script load...');
            
            if (typeof defaultCities !== 'undefined') {
                log(`âœ“ defaultCities defined: ${defaultCities.length} cities`);
            } else {
                log('âœ— defaultCities NOT defined', 'error');
            }
            
            if (typeof fetchRealWeather === 'function') {
                log('âœ“ fetchRealWeather is function');
            } else {
                log('âœ— fetchRealWeather NOT function', 'error');
            }
            
            if (typeof renderCities === 'function') {
                log('âœ“ renderCities is function');
            } else {
                log('âœ— renderCities NOT function', 'error');
            }
            
            // Test 3: Try to fetch from API directly
            log('Test 3: Testing API directly...');
            const testUrl = 'https://api.open-meteo.com/v1/forecast?latitude=51.5074&longitude=-0.1278&current=temperature_2m,relative_humidity_2m,weather_code,is_day&timezone=auto';
            
            fetch(testUrl)
                .then(r => r.json())
                .then(data => {
                    log(`âœ“ API works! London: ${data.current.temperature_2m}Â°C`);
                })
                .catch(e => {
                    log(`âœ— API error: ${e.message}`, 'error');
                });
        }
        
        setTimeout(test, 100);
    </script>
</body>
</html>
