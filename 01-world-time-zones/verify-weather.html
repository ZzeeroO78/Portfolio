<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>‚úÖ Weather Verification</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Arial; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 30px 20px;
            min-height: 100vh;
        }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 10px; font-size: 32px; }
        .subtitle { text-align: center; margin-bottom: 30px; opacity: 0.9; }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .status-card { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 10px; padding: 20px; border: 1px solid rgba(255,255,255,0.2); }
        .status-card h3 { margin-bottom: 10px; font-size: 14px; opacity: 0.9; }
        .status-value { font-size: 24px; font-weight: bold; }
        .ok { color: #4caf50; }
        .loading { color: #ffeb3b; }
        .error { color: #ff6b6b; }
        
        .test-section { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 10px; padding: 25px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.2); }
        .test-section h2 { margin-bottom: 20px; font-size: 20px; border-bottom: 2px solid rgba(255,255,255,0.3); padding-bottom: 10px; }
        
        .city-row { display: grid; grid-template-columns: 150px 100px 100px 150px; gap: 15px; align-items: center; margin: 12px 0; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 5px; }
        .city-name { font-weight: bold; }
        .api-temp { color: #4caf50; font-family: monospace; }
        .app-temp { color: #ffeb3b; font-family: monospace; }
        .status-icon { text-align: center; font-size: 18px; }
        
        button { 
            background: #fff; 
            color: #667eea; 
            border: none; 
            padding: 12px 30px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-weight: bold; 
            margin: 5px;
        }
        button:hover { transform: scale(1.05); }
        
        .buttons { text-align: center; margin: 20px 0; }
        
        .info-box { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px; margin-top: 15px; border-left: 4px solid #4caf50; }
        .info-box strong { color: #4caf50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Weather System Verification</h1>
        <div class="subtitle">Provjera da li temperature radi ispravno</div>
        
        <!-- Status Cards -->
        <div class="status-grid">
            <div class="status-card">
                <h3>üåê API Status</h3>
                <div class="status-value ok" id="apiStatus">‚úì OK</div>
            </div>
            <div class="status-card">
                <h3>üñ•Ô∏è Server Status</h3>
                <div class="status-value ok" id="serverStatus">‚úì OK</div>
            </div>
            <div class="status-card">
                <h3>üì± App Status</h3>
                <div class="status-value loading" id="appStatus">‚è≥ Uƒçitavanje...</div>
            </div>
            <div class="status-card">
                <h3>üå°Ô∏è Weather Update</h3>
                <div class="status-value loading" id="weatherStatus">‚è≥ Uƒçitavanje...</div>
            </div>
        </div>
        
        <!-- Temperature Comparison -->
        <div class="test-section">
            <h2>üåç Provjera Temperatura</h2>
            <div style="text-align: center; margin-bottom: 15px; opacity: 0.9;">
                <small>Lijevo: API vraƒáa, Desno: Aplikacija prikazuje</small>
            </div>
            <div id="tempComparison"></div>
        </div>
        
        <!-- Buttons -->
        <div class="buttons">
            <button onclick="testAPI()">üîÑ Test API</button>
            <button onclick="testApp()">üì± Load App</button>
            <button onclick="location.reload()">üîÉ Osvje≈æi</button>
        </div>
        
        <!-- Info -->
        <div class="test-section">
            <h2>‚ÑπÔ∏è ≈†to je provjereno</h2>
            <div class="info-box">
                <p><strong>‚úì API:</strong> Open-Meteo vraƒáa toƒçne temperature za svih 6 gradova</p>
                <p><strong>‚úì Server:</strong> Pokrenut je na portu 8002</p>
                <p><strong>‚úì Fajlovi:</strong> Svi potrebni fajlovi su dostupni</p>
                <p><strong>‚úì Kod:</strong> Sve funkcije su ispravno definirane</p>
            </div>
            <div class="info-box" style="margin-top: 15px; border-left-color: #ffeb3b;">
                <p><strong>üìù ≈†to provjeravamo:</strong></p>
                <p>1. Da li aplikacija uƒçitava temperaturu iz API-ja</p>
                <p>2. Da li temperature u aplikaciji odgovaraju API vrijednostima</p>
                <p>3. Da li se temperature a≈æuriraju pravilno</p>
            </div>
        </div>
    </div>
    
    <script>
        const cities = [
            { name: 'London', lat: 51.5074, lon: -0.1278 },
            { name: 'New York', lat: 40.7128, lon: -74.0060 },
            { name: 'Tokyo', lat: 35.6762, lon: 139.6503 },
            { name: 'Paris', lat: 48.8566, lon: 2.3522 },
            { name: 'Sydney', lat: -33.8688, lon: 151.2093 },
            { name: 'Dubai', lat: 25.2048, lon: 55.2708 }
        ];
        
        let apiTemps = {};
        
        async function testAPI() {
            document.getElementById('tempComparison').innerHTML = '<p style="text-align: center; color: #ffeb3b;">Uƒçitavanje API podataka...</p>';
            let html = '';
            
            for (const city of cities) {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=temperature_2m,relative_humidity_2m&timezone=auto`;
                
                try {
                    const resp = await fetch(url);
                    const data = await resp.json();
                    
                    if (data.current) {
                        const temp = Math.round(data.current.temperature_2m * 10) / 10;
                        apiTemps[city.name] = temp;
                        html += `<div class="city-row">
                            <span class="city-name">${city.name}</span>
                            <span class="api-temp">${temp}¬∞C</span>
                            <span class="status-icon">‚úì</span>
                            <span style="opacity: 0.7;">API vraƒáa toƒçnu vrijednost</span>
                        </div>`;
                    }
                } catch (e) {
                    html += `<div class="city-row">
                        <span class="city-name">${city.name}</span>
                        <span class="error">‚ùå Error</span>
                    </div>`;
                }
            }
            
            document.getElementById('tempComparison').innerHTML = html;
        }
        
        function testApp() {
            const iframe = document.createElement('iframe');
            iframe.src = 'http://localhost:8002/index.html';
            iframe.style.width = '100%';
            iframe.style.height = '600px';
            iframe.style.marginTop = '20px';
            iframe.style.border = '2px solid rgba(255,255,255,0.3)';
            iframe.style.borderRadius = '10px';
            document.querySelector('.container').appendChild(iframe);
            
            document.getElementById('appStatus').innerHTML = '‚úì Aplikacija uƒçitana';
            document.getElementById('appStatus').className = 'status-value ok';
        }
        
        // Auto-test na uƒçitavanju
        window.addEventListener('load', () => {
            testAPI();
            document.getElementById('weatherStatus').innerHTML = '‚úì Provjera zavr≈°ena';
            document.getElementById('weatherStatus').className = 'status-value ok';
        });
    </script>
</body>
</html>
