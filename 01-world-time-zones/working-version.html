<!DOCTYPE html>
<html>
<head>
    <title>Working Version</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .city {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .city-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .loading {
            color: #999;
        }
        .temperature {
            font-size: 24px;
            color: #ff6b6b;
            font-weight: bold;
        }
        .humidity {
            color: #4ecdc4;
        }
        .season {
            color: #95e1d3;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>üåç World Time Zones - Temperature Test</h1>
    <div id="cities"></div>

    <script>
        const cityCoordinates = {
            'london': { lat: 51.5074, lon: -0.1278 },
            'new york': { lat: 40.7128, lon: -74.0060 },
            'tokyo': { lat: 35.6762, lon: 139.6503 },
            'paris': { lat: 48.8566, lon: 2.3522 },
            'sydney': { lat: -33.8688, lon: 151.2093 },
            'dubai': { lat: 25.2048, lon: 55.2708 }
        };

        const cities = [
            { name: 'London', timezone: 'Europe/London' },
            { name: 'New York', timezone: 'America/New_York' },
            { name: 'Tokyo', timezone: 'Asia/Tokyo' },
            { name: 'Paris', timezone: 'Europe/Paris' },
            { name: 'Sydney', timezone: 'Australia/Sydney' },
            { name: 'Dubai', timezone: 'Asia/Dubai' }
        ];

        const citiesDiv = document.getElementById('cities');

        async function fetchWeather(cityName) {
            const coords = cityCoordinates[cityName.toLowerCase()];
            if (!coords) return null;

            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current=temperature_2m,relative_humidity_2m&timezone=auto`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data && data.current) {
                    return {
                        temp: Math.round(data.current.temperature_2m),
                        humidity: Math.round(data.current.relative_humidity_2m)
                    };
                }
            } catch (e) {
                console.error(`Error fetching ${cityName}:`, e);
            }
            return null;
        }

        async function init() {
            for (const city of cities) {
                const div = document.createElement('div');
                div.className = 'city';
                div.innerHTML = `
                    <div class="city-name">${city.name}</div>
                    <div class="loading">Loading weather...</div>
                `;
                citiesDiv.appendChild(div);

                const weather = await fetchWeather(city.name);
                
                const content = weather 
                    ? `
                        <div class="city-name">${city.name}</div>
                        <div class="temperature">üå°Ô∏è ${weather.temp}¬∞C</div>
                        <div class="humidity">üíß ${weather.humidity}% Humidity</div>
                    `
                    : `
                        <div class="city-name">${city.name}</div>
                        <div class="error">Failed to fetch weather</div>
                    `;
                
                div.innerHTML = content;
            }
        }

        init();
    </script>
</body>
</html>
